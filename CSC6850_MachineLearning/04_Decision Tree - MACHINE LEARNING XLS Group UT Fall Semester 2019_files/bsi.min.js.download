!function(){"use strict";var t;Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),a=n.length>>>0;if(0==a)return!1;var i,r,o=0|t,d=Math.max(0<=o?o:a-Math.abs(o),0);for(;d<a;){if((i=n[d])===(r=e)||"number"==typeof i&&"number"==typeof r&&isNaN(i)&&isNaN(r))return!0;d++}return!1}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null===this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var a=arguments[1],i=0;i<n;){var r=t[i];if(e.call(a,r,i,t))return i;i++}return-1},configurable:!0,writable:!0});var e=!1,n=!1;function a(){e&&n&&t()}var u={WebComponentsLoaded:function(){e=!0,a()},WCRDispatched:function(){n=!0,a()},WebComponentsReady:new Promise(function(e){t=e}),reset:function(){n=e=!1,this.WebComponentsReady=new Promise(function(e){t=e})}},i=0,r={},o=!1;function d(){for(var e in o=!0,r){var t=r[e];"pending"===t.id&&(t.id=window.fastdom[t.method](t.cb))}}function s(e,t){if(window.fastdom||o)return window.fastdom[e](t);var n="d2l_fastdom_"+ ++i;return r[n]={method:e,id:"pending",cb:t},u.WebComponentsReady.then(d),n}var c={__getIndex:function(){return i},__getIdMap:function(){return r},__reset:function(){i=0,o=!(r={}),u.reset()},__wcr:u,clear:function(e){if(void 0!==e){var t=e;if(void 0!==r[e]){if("pending"===r[e].id)return void(r[e].id="cleared");if("cleared"===r[e].id)return;t=r[e].id}window.fastdom&&window.fastdom.clear(t)}},measure:function(e){return s("measure",e)},mutate:function(e){return s("mutate",e)}};var m,l=(function(e){function n(e,n,a,i){var r,o=e._tasks,d=e.fastdom,s=new Promise(function(e,t){r=d[n](function(){o.delete(s);try{e(i?a.call(i):a())}catch(e){t(e)}},i)});return o.set(s,r),s}var t;t={initialize:function(){this._tasks=new Map},mutate:function(e,t){return n(this,"mutate",e,t)},measure:function(e,t){return n(this,"measure",e,t)},clear:function(e){var t=this._tasks,n=t.get(e);this.fastdom.clear(n),t.delete(e)}},"f"=="undefined"[0]?(void 0)(function(){return t}):"o"=="object"[0]?e.exports=t:window.fastdomPromised=t}(m={exports:{}},m.exports),m.exports);window.addEventListener("d2l-performance-measure",function(a){var e=/(\?|&)timingdebug=(1|0)/gi.exec(location.search);if(null!==e&&3===e.length){var t="0"!==e[2];try{t?window.sessionStorage.setItem("TimingDebug","1"):window.sessionStorage.removeItem("TimingDebug")}catch(a){}}var n=!1;try{n=null!==window.sessionStorage.getItem("TimingDebug")}catch(a){}n&&c.mutate(function(){var e=document.createElement("div"),t="paint"===a.detail.value.entryType?a.detail.value.startTime:a.detail.value.duration;e.appendChild(document.createTextNode(a.detail.value.name+": "+Math.floor(t)));var n=document.querySelector(".d2l-page-timing");null===n?((n=document.createElement("div")).className="d2l-page-timing",n.appendChild(e),document.body.appendChild(n)):n.appendChild(e)})}),function(){if(window.performance&&window.performance.mark&&window.performance.measure&&window.performance.getEntriesByName){var e=!1,t=!1,n=!1;if("complete"===document.readyState?d():addEventListener("load",d),u.WebComponentsReady.then(o),"PerformanceObserver"in window){var a=new PerformanceObserver(function(e){var t=e.getEntries();void 0!==t&&0<t.length&&t.forEach(function(e){r("d2l.page."+e.name,e)})});try{a.observe({entryTypes:["paint"]})}catch(e){}}setTimeout(o,1e4)}function r(e,t){document.dispatchEvent(new CustomEvent("d2l-performance-measure",{bubbles:!0,detail:{name:e,value:t}}))}function i(e,t,n,a){window.performance.measure(e,t,n);var i=window.performance.getEntriesByName(e,"measure");1===i.length&&a&&r(e,i[0])}function o(){e||(e=!0,window.performance.mark("webComponentsReady"),s())}function d(){t=!0,s()}function s(){e&&t&&!n&&(i("d2l.page.preFetch","navigationStart","fetchStart",!(n=!0)),i("d2l.page.domInteractive","fetchStart","domInteractive",!1),i("d2l.page.domContentLoadedHandlers","domContentLoadedEventStart","domContentLoadedEventEnd",!1),i("d2l.page.load","fetchStart","loadEventStart",!1),i("d2l.page.server","requestStart","responseStart",!1),i("d2l.page.download","responseStart","responseEnd",!1),i("d2l.page.timeToClient","navigationStart","responseEnd",!0),i("d2l.page.webComponentsReady","navigationStart","webComponentsReady",!0))}}(),$.widget("vui.vui_changeTracker",{options:{showChanges:!0},_create:function(){var a=this;"false"===this.element.attr("data-show-changes")&&(this.options.showChanges=!1),this.element.data("changedItems",{}).on("vui-change",function(e){var t=$(e.target).attr("id");t&&(a.element.data("changedItems")[t]=!0,a._isTrackingEnabled()&&a.options.showChanges&&!e.isChangeShown&&(a.element.addClass("vui-changed"),e.isChangeShown=!0))}).on("vui-restore",function(e){var t=$(e.target).attr("id");if(t){var n=a.element.data("changedItems");void 0!==n[t]&&delete n[t],a._isTrackingEnabled()&&a.options.showChanges&&0===Object.keys(n).length&&a.element.removeClass("vui-changed")}})},_destroy:function(){$(this.element).removeClass("vui-changed").off("vui-change vui-restore")},_isTrackingEnabled:function(){var e=this.element.closest("[data-track-changes]");return 1===e.length&&"true"===e.attr("data-track-changes")},containsChanges:function(){return 0<Object.keys(this.element.data("changedItems")).length},hasElementChanged:function(e){var t=$(e).attr("id");return!!t&&!0===this.element.data("changedItems")[t]},isChangeShown:function(){return this.element.hasClass("vui-changed")}}),$.widget("vui.vui_changeTracking",{_create:function(){var e=this.element.prop("nodeName");if("INPUT"===e&&"radio"===this.element.attr("type")){var t=this.element.prop("name");if(t){var n=$('input[name="'+t+'"]:checked');n.uniqueId(),this.element.data("selectedId",n.attr("id"))}}var a={me:this};$(document).on("vui-reset",a,this._handleReset),this.element.uniqueId().data("originalValue",this._getValue(this.element)).data("hasChanged",!1).on("change.vui",a,this._handleChange)},_destroy:function(){this.hasChanged()&&this.element.trigger("vui-restore"),$(document).off("vui-reset",this._handleReset),this.element.off("change.vui").removeUniqueId()},_getValue:function(e){var t=e.get(0),n=e.prop("nodeName");if("SELECT"===n)return e.val();if("INPUT"===n){var a=e.attr("type");if("checkbox"===a||"radio"===a)return t.checked}return t.value},_handleChange:function(e){var n=e.data.me,t=n.element,a=t.get(0),i=t.prop("nodeName"),r=t.data("selectedId"),o=t.attr("id");if("INPUT"===i&&"radio"===t.attr("type")){var d=t.prop("name");d&&$('input[name="'+d+'"]').each(function(e){var t=$(this);this!==a&&t.attr("id")===r&&n._triggerEvent(t),t.data("selectedId",o)})}n._triggerEvent(t)},_handleReset:function(e){var t=e.data.me;0<t.element.closest(e.target).length&&t.hasChanged()&&t.element.data("originalValue",t._getValue(t.element)).data("hasChanged",!1).trigger("vui-restore")},_triggerEvent:function(e){var t=this._getValue(e)!==e.data("originalValue");e.data("hasChanged",t).trigger(t?"vui-change":"vui-restore")},hasChanged:function(){return $(this.element).data("hasChanged")}}),window.D2L=window.D2L||{},window.D2L.WebComponentsLoaded=u.WebComponentsLoaded,window.D2L.WCRDispatched=u.WCRDispatched,window.D2L.WebComponentsReady=u.WebComponentsReady,window.d2lWCLoaded&&u.WebComponentsLoaded(),window.d2lWCRDispatched&&u.WCRDispatched(),window.D2L.FastDom=c,window.D2L.fastdom=l,window.D2L.fastdom.fastdom=c,window.D2L.fastdom.initialize()}();
//# sourceMappingURL=bsi.min.js.map